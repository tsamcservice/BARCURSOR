<!DOCTYPE html>
<html lang="zh-TW">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>分享會員卡</title>
	<link rel="stylesheet" href="../css/style.css">
	<script charset="utf-8" src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>

<body>
	<div class="container">
		<div id="card-preview" class="card-preview">
			<!-- 卡片預覽將在這裡動態載入 -->
		</div>
		<div class="share-buttons">
			<button onclick="shareCard()" class="btn btn-primary">分享到 LINE</button>
			<button onclick="copyShareLink()" class="btn btn-secondary">複製分享連結</button>
		</div>
	</div>

	<script src="../js/share.js"></script>
	<script>
		// 從 URL 獲取卡片 ID
		const cardId = window.location.pathname.split('/').pop();
		
		// 載入卡片預覽
		async function loadCardPreview() {
			try {
				const response = await fetch(`/api/cards/share?cardId=${cardId}`);
				const { card } = await response.json();
				
				if (card) {
					const previewContainer = document.getElementById('card-preview');
					// 這裡可以根據需要渲染卡片預覽
					// 例如：使用 LINE Flex Message 的預覽組件
				}
			} catch (error) {
				console.error('載入卡片預覽失敗:', error);
			}
		}

		// 頁面載入時初始化
		document.addEventListener('DOMContentLoaded', () => {
			initLiff();
			loadCardPreview();
		});
	</script>
</body>

</html>